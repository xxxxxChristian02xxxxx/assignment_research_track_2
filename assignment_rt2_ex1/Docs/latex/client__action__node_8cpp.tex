\hypertarget{client__action__node_8cpp}{}\doxysection{src/client\+\_\+action\+\_\+node.cpp File Reference}
\label{client__action__node_8cpp}\index{src/client\_action\_node.cpp@{src/client\_action\_node.cpp}}


This is the client node that will send the target to the server and will receive the feedback from the server n order to move the robot.  


{\ttfamily \#include \char`\"{}ros/ros.\+h\char`\"{}}\newline
{\ttfamily \#include $<$actionlib/client/simple\+\_\+action\+\_\+client.\+h$>$}\newline
{\ttfamily \#include $<$actionlib/client/terminal\+\_\+state.\+h$>$}\newline
{\ttfamily \#include $<$assignment\+\_\+2\+\_\+2024/\+Planning\+Action.\+h$>$}\newline
{\ttfamily \#include $<$assignment\+\_\+rt2\+\_\+ex1/\+M\+\_\+vel\+\_\+pos.\+h$>$}\newline
{\ttfamily \#include $<$nav\+\_\+msgs/\+Odometry.\+h$>$}\newline
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$std\+\_\+msgs/\+String.\+h$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
{\ttfamily \#include \char`\"{}assignment\+\_\+rt2\+\_\+ex1/\+Service\+\_\+target\+\_\+coordinates.\+h\char`\"{}}\newline
{\ttfamily \#include $<$std\+\_\+msgs/\+Float32.\+h$>$}\newline
{\ttfamily \#include $<$sensor\+\_\+msgs/\+Laser\+Scan.\+h$>$}\newline
Include dependency graph for client\+\_\+action\+\_\+node.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{client__action__node_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{client__action__node_8cpp_a4d9cc9979036b20c8cd0636811c6fc12}{message\+Callback}} (const nav\+\_\+msgs\+::\+Odometry\+::\+Const\+Ptr \&msg)
\begin{DoxyCompactList}\small\item\em Callback function for the position of the robot. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{client__action__node_8cpp_a548c7d3adead5bc7909449c21818b2e9}{feedback\+Callback}} (const assignment\+\_\+2\+\_\+2024\+::\+Planning\+Action\+Feedback\+::\+Const\+Ptr \&msg)
\begin{DoxyCompactList}\small\item\em Callback function for the feedback of the server. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{client__action__node_8cpp_a39fa80704c3dd9378ba49ed5009bab78}{laser\+Callback}} (const sensor\+\_\+msgs\+::\+Laser\+Scan\+::\+Const\+Ptr \&msg)
\begin{DoxyCompactList}\small\item\em Callback function for the laser scan. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{client__action__node_8cpp_aeece3e5d6cc1e7208e7ab435b9bc5a4f}{decide\+\_\+action\+\_\+in\+\_\+moving}} (actionlib\+::\+Simple\+Action\+Client$<$ assignment\+\_\+2\+\_\+2024\+::\+Planning\+Action $>$ \&client)
\begin{DoxyCompactList}\small\item\em Function to decide the action while the robot is moving. \end{DoxyCompactList}\item 
assignment\+\_\+2\+\_\+2024\+::\+Planning\+Goal \mbox{\hyperlink{client__action__node_8cpp_a99b87c623ea411bd683be10ef1dada7e}{set\+\_\+target}} (nav\+\_\+msgs\+::\+Odometry target\+\_\+element)
\begin{DoxyCompactList}\small\item\em Function to set the target. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{client__action__node_8cpp_ab905db6342f58bdf6be67f7087e95b62}{call\+\_\+service}} ()
\begin{DoxyCompactList}\small\item\em Function to call the service. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{client__action__node_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}} (int argc, char $\ast$$\ast$argv)
\begin{DoxyCompactList}\small\item\em Main function. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{client__action__node_8cpp_aef3794a5fbc75ec294756634de12016c}\label{client__action__node_8cpp_aef3794a5fbc75ec294756634de12016c}} 
assignment\+\_\+rt2\+\_\+ex1\+::\+M\+\_\+vel\+\_\+pos {\bfseries vel\+\_\+pose}
\item 
\mbox{\Hypertarget{client__action__node_8cpp_ad8d7bb595363bf809e34f5a4cef02fa9}\label{client__action__node_8cpp_ad8d7bb595363bf809e34f5a4cef02fa9}} 
ros\+::\+Publisher {\bfseries pub\+\_\+pos\+\_\+vel}
\item 
\mbox{\Hypertarget{client__action__node_8cpp_a915f2853ee3c6b9d34fe8e10e4268d52}\label{client__action__node_8cpp_a915f2853ee3c6b9d34fe8e10e4268d52}} 
ros\+::\+Publisher \mbox{\hyperlink{client__action__node_8cpp_a915f2853ee3c6b9d34fe8e10e4268d52}{publish\+\_\+distance}}
\begin{DoxyCompactList}\small\item\em publisher to publish the distance from the obstacles \end{DoxyCompactList}\item 
\mbox{\Hypertarget{client__action__node_8cpp_a31cb577bce8717bb6e49a9048d39bda1}\label{client__action__node_8cpp_a31cb577bce8717bb6e49a9048d39bda1}} 
assignment\+\_\+2\+\_\+2024\+::\+Planning\+Action\+Feedback\+::\+Const\+Ptr \mbox{\hyperlink{client__action__node_8cpp_a31cb577bce8717bb6e49a9048d39bda1}{fdk}}
\begin{DoxyCompactList}\small\item\em feedback from the server reference \end{DoxyCompactList}\item 
\mbox{\Hypertarget{client__action__node_8cpp_a70b5e28b5bc3d1b63a7435c5fe50b837}\label{client__action__node_8cpp_a70b5e28b5bc3d1b63a7435c5fe50b837}} 
int \mbox{\hyperlink{client__action__node_8cpp_a70b5e28b5bc3d1b63a7435c5fe50b837}{dim}} = 3
\begin{DoxyCompactList}\small\item\em dimension of the vector containing the target coordinates \end{DoxyCompactList}\item 
\mbox{\Hypertarget{client__action__node_8cpp_a6606627ae2b60ad19d8819c46eedde0b}\label{client__action__node_8cpp_a6606627ae2b60ad19d8819c46eedde0b}} 
std\+::vector$<$ nav\+\_\+msgs\+::\+Odometry $>$ \mbox{\hyperlink{client__action__node_8cpp_a6606627ae2b60ad19d8819c46eedde0b}{target\+\_\+array}}
\begin{DoxyCompactList}\small\item\em vector containing the target coordinates \end{DoxyCompactList}\item 
\mbox{\Hypertarget{client__action__node_8cpp_a093d1fa4b7502d474150a131b085aaa7}\label{client__action__node_8cpp_a093d1fa4b7502d474150a131b085aaa7}} 
int \mbox{\hyperlink{client__action__node_8cpp_a093d1fa4b7502d474150a131b085aaa7}{num\+\_\+elements}} =0
\begin{DoxyCompactList}\small\item\em index to keep track the target selected \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This is the client node that will send the target to the server and will receive the feedback from the server n order to move the robot. 

\begin{DoxyAuthor}{Author}
Christian Negri Ravera 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2021-\/07-\/01 
\end{DoxyDate}
\begin{DoxyVersion}{Version}
1.\+0
\end{DoxyVersion}
Subscribes to\+: ~\newline
 /odom\+: \mbox{[}nav\+\_\+msgs/\+Odometry\mbox{]} ~\newline
 /reaching\+\_\+goal/feedback\+: \mbox{[}assignment\+\_\+2\+\_\+2024/\+Planning\+Action\mbox{]} ~\newline
 /scan\+: \mbox{[}sensor\+\_\+msgs/\+Laser\+Scan\mbox{]} ~\newline


Publishes to\+: ~\newline
 /pos\+\_\+vel\+\_\+custom\+\_\+mess\+: \mbox{[}assignment\+\_\+rt2\+\_\+ex1/\+M\+\_\+vel\+\_\+pos\mbox{]} ~\newline
 /distance\+\_\+from\+\_\+obstacle\+: \mbox{[}std\+\_\+msgs/\+Float32\mbox{]} ~\newline


Description\+: ~\newline
 The node provides the possibility to give a list of targets to the robot and make it reach them. Goals can be chnaged while the robot is moving. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{client__action__node_8cpp_ab905db6342f58bdf6be67f7087e95b62}\label{client__action__node_8cpp_ab905db6342f58bdf6be67f7087e95b62}} 
\index{client\_action\_node.cpp@{client\_action\_node.cpp}!call\_service@{call\_service}}
\index{call\_service@{call\_service}!client\_action\_node.cpp@{client\_action\_node.cpp}}
\doxysubsubsection{\texorpdfstring{call\_service()}{call\_service()}}
{\footnotesize\ttfamily void call\+\_\+service (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Function to call the service. 


\begin{DoxyParams}{Parameters}
{\em none} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
none
\end{DoxyReturn}
Description\+: ~\newline
 This function will call the service to get the target coordinates \mbox{\Hypertarget{client__action__node_8cpp_aeece3e5d6cc1e7208e7ab435b9bc5a4f}\label{client__action__node_8cpp_aeece3e5d6cc1e7208e7ab435b9bc5a4f}} 
\index{client\_action\_node.cpp@{client\_action\_node.cpp}!decide\_action\_in\_moving@{decide\_action\_in\_moving}}
\index{decide\_action\_in\_moving@{decide\_action\_in\_moving}!client\_action\_node.cpp@{client\_action\_node.cpp}}
\doxysubsubsection{\texorpdfstring{decide\_action\_in\_moving()}{decide\_action\_in\_moving()}}
{\footnotesize\ttfamily void decide\+\_\+action\+\_\+in\+\_\+moving (\begin{DoxyParamCaption}\item[{actionlib\+::\+Simple\+Action\+Client$<$ assignment\+\_\+2\+\_\+2024\+::\+Planning\+Action $>$ \&}]{client }\end{DoxyParamCaption})}



Function to decide the action while the robot is moving. 


\begin{DoxyParams}{Parameters}
{\em client} & \mbox{[}actionlib\+::\+Simple\+Action\+Client$<$assignment\+\_\+2\+\_\+2024\+::\+Planning\+Action$>$\&\mbox{]} the client to send the action \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
none
\end{DoxyReturn}
Description\+: ~\newline
 This function will ask the user if he wants to cancel the target while the robot is moving. If the user wants to cancel the target, the function will send the cancel\+Goal to the client \mbox{\Hypertarget{client__action__node_8cpp_a548c7d3adead5bc7909449c21818b2e9}\label{client__action__node_8cpp_a548c7d3adead5bc7909449c21818b2e9}} 
\index{client\_action\_node.cpp@{client\_action\_node.cpp}!feedbackCallback@{feedbackCallback}}
\index{feedbackCallback@{feedbackCallback}!client\_action\_node.cpp@{client\_action\_node.cpp}}
\doxysubsubsection{\texorpdfstring{feedbackCallback()}{feedbackCallback()}}
{\footnotesize\ttfamily void feedback\+Callback (\begin{DoxyParamCaption}\item[{const assignment\+\_\+2\+\_\+2024\+::\+Planning\+Action\+Feedback\+::\+Const\+Ptr \&}]{msg }\end{DoxyParamCaption})}



Callback function for the feedback of the server. 


\begin{DoxyParams}{Parameters}
{\em msg} & \mbox{[}assignment\+\_\+2\+\_\+2024\+::\+Planning\+Action\+Feedback\+::\+Const\+Ptr\mbox{]} the message containing the feedback of the server \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
none
\end{DoxyReturn}
Description\+: ~\newline
 This function is the callback for the feedback of the server. It will store the feedback in the global variable fdk \mbox{\Hypertarget{client__action__node_8cpp_a39fa80704c3dd9378ba49ed5009bab78}\label{client__action__node_8cpp_a39fa80704c3dd9378ba49ed5009bab78}} 
\index{client\_action\_node.cpp@{client\_action\_node.cpp}!laserCallback@{laserCallback}}
\index{laserCallback@{laserCallback}!client\_action\_node.cpp@{client\_action\_node.cpp}}
\doxysubsubsection{\texorpdfstring{laserCallback()}{laserCallback()}}
{\footnotesize\ttfamily void laser\+Callback (\begin{DoxyParamCaption}\item[{const sensor\+\_\+msgs\+::\+Laser\+Scan\+::\+Const\+Ptr \&}]{msg }\end{DoxyParamCaption})}



Callback function for the laser scan. 


\begin{DoxyParams}{Parameters}
{\em msg} & \mbox{[}sensor\+\_\+msgs\+::\+Laser\+Scan\+::\+Const\+Ptr\mbox{]} the message containing the laser scan \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
none
\end{DoxyReturn}
Description\+: ~\newline
 This function is the callback for the laser scan. It will store the minimum distance from the obstacles in the global variable closest\+\_\+obstacle \mbox{\Hypertarget{client__action__node_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{client__action__node_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{client\_action\_node.cpp@{client\_action\_node.cpp}!main@{main}}
\index{main@{main}!client\_action\_node.cpp@{client\_action\_node.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}



Main function. 


\begin{DoxyParams}{Parameters}
{\em argc} & \mbox{[}int\mbox{]} number of arguments \\
\hline
{\em argv} & \mbox{[}char$\ast$$\ast$\mbox{]} arguments \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 since it is main function
\end{DoxyReturn}
Description\+: ~\newline
 This is the main function of the node. It will initialize the node, create the action client, and wait for the server to start. Initialize the publisher and the subscriber. Ask the user for the target coordinates the robot must reach. Gives the possibility to eliminate the target while the robot is moving. After all goals reached, the user can insert new targets. \mbox{\Hypertarget{client__action__node_8cpp_a4d9cc9979036b20c8cd0636811c6fc12}\label{client__action__node_8cpp_a4d9cc9979036b20c8cd0636811c6fc12}} 
\index{client\_action\_node.cpp@{client\_action\_node.cpp}!messageCallback@{messageCallback}}
\index{messageCallback@{messageCallback}!client\_action\_node.cpp@{client\_action\_node.cpp}}
\doxysubsubsection{\texorpdfstring{messageCallback()}{messageCallback()}}
{\footnotesize\ttfamily void message\+Callback (\begin{DoxyParamCaption}\item[{const nav\+\_\+msgs\+::\+Odometry\+::\+Const\+Ptr \&}]{msg }\end{DoxyParamCaption})}



Callback function for the position of the robot. 


\begin{DoxyParams}{Parameters}
{\em msg} & \mbox{[}nav\+\_\+msgs\+::\+Odometry\+::\+Const\+Ptr\mbox{]} the message containing the position of the robot \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
none
\end{DoxyReturn}
Description\+: ~\newline
 This function is the callback for the position of the robot. It will store the position and the velocity of the robot in the global variable vel\+\_\+pose \mbox{\Hypertarget{client__action__node_8cpp_a99b87c623ea411bd683be10ef1dada7e}\label{client__action__node_8cpp_a99b87c623ea411bd683be10ef1dada7e}} 
\index{client\_action\_node.cpp@{client\_action\_node.cpp}!set\_target@{set\_target}}
\index{set\_target@{set\_target}!client\_action\_node.cpp@{client\_action\_node.cpp}}
\doxysubsubsection{\texorpdfstring{set\_target()}{set\_target()}}
{\footnotesize\ttfamily assignment\+\_\+2\+\_\+2024\+::\+Planning\+Goal set\+\_\+target (\begin{DoxyParamCaption}\item[{nav\+\_\+msgs\+::\+Odometry}]{target\+\_\+element }\end{DoxyParamCaption})}



Function to set the target. 


\begin{DoxyParams}{Parameters}
{\em target\+\_\+element} & \mbox{[}nav\+\_\+msgs\+::\+Odometry\mbox{]} the target coordinates \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
assignment\+\_\+2\+\_\+2024\+::\+Planning\+Goal the goal to reach the target
\end{DoxyReturn}
Description\+: ~\newline
 This function will set the target to reach 